# architecture_patterns

## 1주차 - MVC 패턴

### 1. MVC 패턴의 개요
MVC 패턴은 웹 개발에서 많이 활용되었던 패턴이며 아직까지도 사용하는 곳이 많다고 한다.
MVC 패턴이란 코드를 각각
Model(데이터 및 비즈니스 로직)
View(사용자에게 보여지는 UI)
Controller(모델과 뷰를 연결하는 역할, 사용자 입력을 받고 그 입력에 대한 처리를 모델에 부탁하고, 모델이 처리한 결과를 뷰에 전달)
이렇게 세 부분으로 구성하는 방식을 의미한다.

### 2. MVC 패턴의 원칙
MVC 패턴을 적용해서 코드를 짤 때 몇 가지 원칙이 있는데 다음과 같다.
1) 모델은 컨트롤러와 뷰를 몰라야 한다 - 아예 모델 코드 내부에 컨트롤러와 뷰 코드가 없어야 한다고 생각하면 편함
2) 뷰는 컨트롤러를 몰라야 한다
3) 뷰가 모델로부터 데이터를 받을 때는 사용자마다 다르게 보어주어야 하는 데이터에 대해서만 받아야 한다
4) 컨트롤러는 모델과 뷰에 의존해도 된다 - 양쪽 코드 써도 된다
5) 뷰가 모델로부터 데이터를 받을 때는 컨트롤러를 통해 받아야한다

1번의 경우 가장 중요한 원칙이라고 생각된다. 모델은 데이터를 다루는 가장 중요하고 예민한 역할을 수행하므로 완전 독립적으로 이루어져 한다.<br>
2번의 경우 뷰에서 컨트롤러를 사용하면 안 된다. MVC에서는 사용자 입력을 컨트롤러가 담당하기 때문에 뷰로부터 요청을 받지 않기 떄문에 뷰에서 컨트롤러로 향하는 화살표는 없고 모델에서 처리된 데이터를 전달할 때 반대로 컨트롤러에서 뷰로 화살표가 향한다.<br>
3번은 가장 의미 없는 원칙이라고 생각한다. 애초에 데이터는 사용자마다 차이가 발생하는 것만 저장한다.<br>
4번은 가장 직관적으로 이해된다. 양쪽의 다리를 맡는 만큼 양쪽 코드를 다 쓸 수 있고 그래야만 한다.<br>
5번은 얼핏 2번과 상충되는 것 같아보인다. 뷰는 컨트롤러를 몰라야하고 모델은 알 수 있는데 정작 모델에서 데이터를 받을 때는 컨트롤러를 통해 받는다고? 웹이나 안드로이드 등의 개발에서는 UI를 구성하는 요소들에 id값을 할당하고 다른 코드에서 해당 id로 UI 요소들에 접근해서 그것들을 변경할 수 있다. 따라서 뷰가 컨트롤러를 몰라도 컨트롤러에서 뷰를 바꿔줄 수 있는 것이다. 또 하나, 모델의 코드는 있어도 되지만 모델에서 직접 받으면 안 된다는 것 또한 헷갈리는데 컨트롤러에서 뷰에 주입해준 데이터가 모델 인스턴스라면 그 인스턴스에 대한 것은 모델의 코드이니 이런 경우를 생각하면 이해에 도움이 될 것 같다.

### 3. 플러터와 MVC 패턴
결론부터 이야기하자면 플러터는 MVC와 궁합이 맞지 않는다. 단순히 잘 안 맞는다가 아니라 사실상 플러터 개발을 할 때 MVC 패턴을 엄격히 적용하기가 너무 어렵고 비효율적이다.
MVC는 UI와 기타 코드가 구분된 웹에서 많은 사랑을 받아왔고 안드로이드 또한 xml을 뷰로 볼 것인가, xml 요소들을 코드에 할당하는 코드 부분까지 뷰로 볼 것이냐에 어느 정도 논란의 여지가 있지만 양 쪽 다 코드에서 UI를 변경할 수 있기 때문에 뷰와 컨트롤러를 구분할 수 있다.<br>
하지만 플러터는 모든 것이 위젯으로 이루어져 있고 각각의 위젯은 뷰와 컨트롤러의 성격을 함께 갖는다. 물론 리액트 컴포넌트나 안드로이드 액티비티나 프래그먼트 또한 그렇다. 하지만 가장 큰 차이는, 웹이나 안드로이드에서는 코드에서 미리 정해놓은 레이아웃 요소들의 프로퍼티를 변경할 수 있지만 플러터는 불가능하다는 점이다. 하나의 페이지에 IconButton을 넣어놓았을 때 그 IconButton을 다른 페이지에서 접근할 수 있는가? 다른 개발에서는 id값으로 접근할 수 있지만 플러터는 위젯들을 생성자를 통해 상태 변화가 있을 때마다 새로 그리는 방식이기 때문에 그럴 수가 없다.<br>
플러터에서 MVC 패턴과 관련된 이야기를 찾기 힘든 이유가 있었던 것이다. 또한 웹이나 안드로이드 개발에 대한 이해가 없이 플러터로 개발을 시작한 개발자 또한 이러한 이유 때문에 MVC 패턴을 이해하기가 힘들었을 것이다.<br>
흔히 아키텍처 패턴을 이야기할 때 가장 좋은 것은 없고 상황에 따라 선택하면 된다는 이야기를 하곤 한다. 하지만 플러터 개발에 있어서 MVC는 잘 어울리지 않는다는 생각을 지울 수가 없다.<br>

### 4. 그 외 하고 싶은 말
구글 팀에서 플러터와 관련하여 MVC+S 패턴을 쓰고 있다는 이야기를 들은 적이 있다. MVC+S는 기존 MVC 패턴에 Service 레이어를 더한 패턴이라는데 어떻게 적용했을지 궁금하다.
이번 스터디에서는 계획되지 않았지만 기회가 된다면 이것 역시 다뤄보고 싶다.<br>
또한 MVC 패턴이 플러터와 맞지 않는다고 낙담할 필요는 전혀 없다고 생각한다.<br>
이미 안드로이드는 컴포즈, iOS는 스위프트UI를 새롭게 발표하며 플러터와 비슷하게 바뀌고 있다.<br>
오히려 새롭고 혁신적인 방식이고, 웹과는 다른 방식이기 때문에 그저 맞지 않을 뿐이라고 생각하는 것이 더 나을 것 같다.<br>